<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>density: lf_heter_queue&lt; RUNTIME_TYPE, ALLOCATOR_TYPE, PROD_CARDINALITY, CONSUMER_CARDINALITY, CONSISTENCY_MODEL &gt;::reentrant_consume_operation Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">density
   </div>
   <div id="projectbrief">C++11 library for paged memory management, function queues, heterogeneous queues and lifo memory management</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacedensity.html">density</a></li><li class="navelem"><a class="el" href="classdensity_1_1lf__heter__queue.html">lf_heter_queue</a></li><li class="navelem"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lf_heter_queue&lt; RUNTIME_TYPE, ALLOCATOR_TYPE, PROD_CARDINALITY, CONSUMER_CARDINALITY, CONSISTENCY_MODEL &gt;::reentrant_consume_operation Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="lf__heter__queue_8h_source.html">lf_heter_queue.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2a74c42ebc0d72ec53c819d1415f5afa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a2a74c42ebc0d72ec53c819d1415f5afa">reentrant_consume_operation</a> () noexcept=default</td></tr>
<tr class="separator:a2a74c42ebc0d72ec53c819d1415f5afa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1430f18ae1ce86cc8f009fda9f1852ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a1430f18ae1ce86cc8f009fda9f1852ac">reentrant_consume_operation</a> (const <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;)=delete</td></tr>
<tr class="separator:a1430f18ae1ce86cc8f009fda9f1852ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1740fe21353ef84ff86517a484cd88e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a1740fe21353ef84ff86517a484cd88e0">operator=</a> (const <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;)=delete</td></tr>
<tr class="separator:a1740fe21353ef84ff86517a484cd88e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7846d9c2ff73566d66157f8ab2b87537"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a7846d9c2ff73566d66157f8ab2b87537">reentrant_consume_operation</a> (<a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&amp;i_source) noexcept=default</td></tr>
<tr class="separator:a7846d9c2ff73566d66157f8ab2b87537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c5b3026d809cdf9c7623b7ef7af526"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a85c5b3026d809cdf9c7623b7ef7af526">operator=</a> (<a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&amp;i_source) noexcept=default</td></tr>
<tr class="separator:a85c5b3026d809cdf9c7623b7ef7af526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4dbafd6c121200dbd7e89cee73f239d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#aa4dbafd6c121200dbd7e89cee73f239d">~reentrant_consume_operation</a> ()</td></tr>
<tr class="separator:aa4dbafd6c121200dbd7e89cee73f239d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab863df8ed6316860117a6bf26e131bbd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#ab863df8ed6316860117a6bf26e131bbd">empty</a> () const  noexcept</td></tr>
<tr class="separator:ab863df8ed6316860117a6bf26e131bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2b1a2d00e00f238645907a7a6a54022"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#ae2b1a2d00e00f238645907a7a6a54022">operator bool</a> () const  noexcept</td></tr>
<tr class="separator:ae2b1a2d00e00f238645907a7a6a54022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4104ae7c746654227e3ae070f2d7dc60"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdensity_1_1lf__heter__queue.html">lf_heter_queue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a> () const  noexcept</td></tr>
<tr class="separator:a4104ae7c746654227e3ae070f2d7dc60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96491d550e91a5918050bfdafe43a72c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a96491d550e91a5918050bfdafe43a72c">commit</a> () noexcept</td></tr>
<tr class="separator:a96491d550e91a5918050bfdafe43a72c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68da6f2190f50df8428c794069767a4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a68da6f2190f50df8428c794069767a4e">commit_nodestroy</a> () noexcept</td></tr>
<tr class="separator:a68da6f2190f50df8428c794069767a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a209a4e37e25451c144910d6f6aa4911e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a209a4e37e25451c144910d6f6aa4911e">cancel</a> () noexcept</td></tr>
<tr class="separator:a209a4e37e25451c144910d6f6aa4911e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97f6c2bf3438af74d84b52ded51b122f"><td class="memItemLeft" align="right" valign="top">const RUNTIME_TYPE &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a97f6c2bf3438af74d84b52ded51b122f">complete_type</a> () const  noexcept</td></tr>
<tr class="separator:a97f6c2bf3438af74d84b52ded51b122f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad464296faf44c566773b99c68fb2d806"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#ad464296faf44c566773b99c68fb2d806">unaligned_element_ptr</a> () const  noexcept</td></tr>
<tr class="separator:ad464296faf44c566773b99c68fb2d806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58d317d83cb661b5c2a12a1be495cbc8"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a58d317d83cb661b5c2a12a1be495cbc8">element_ptr</a> () const  noexcept</td></tr>
<tr class="separator:a58d317d83cb661b5c2a12a1be495cbc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab77422c5e20b146d59a21112b8bf9c5d"><td class="memTemplParams" colspan="2">template&lt;typename COMPLETE_ELEMENT_TYPE &gt; </td></tr>
<tr class="memitem:ab77422c5e20b146d59a21112b8bf9c5d"><td class="memTemplItemLeft" align="right" valign="top">COMPLETE_ELEMENT_TYPE &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#ab77422c5e20b146d59a21112b8bf9c5d">element</a> () const  noexcept</td></tr>
<tr class="separator:ab77422c5e20b146d59a21112b8bf9c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c43f691d824a50f38bb8b54a6c3847a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c43f691d824a50f38bb8b54a6c3847a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>reentrant_consume_operation</b> (PrivateType, <a class="el" href="classdensity_1_1lf__heter__queue.html">lf_heter_queue</a> *i_queue) noexcept</td></tr>
<tr class="separator:a0c43f691d824a50f38bb8b54a6c3847a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb28f7863f14b7a6d920b6105ea7917"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aecb28f7863f14b7a6d920b6105ea7917"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>start_consume_impl</b> (PrivateType, <a class="el" href="classdensity_1_1lf__heter__queue.html">lf_heter_queue</a> *i_queue)</td></tr>
<tr class="separator:aecb28f7863f14b7a6d920b6105ea7917"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:af3bd6a438d194e0df286b60375c458a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#af3bd6a438d194e0df286b60375c458a1">swap</a> (<a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;i_first, <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;i_second) noexcept</td></tr>
<tr class="separator:af3bd6a438d194e0df286b60375c458a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename RUNTIME_TYPE = runtime_type&lt;&gt;, typename ALLOCATOR_TYPE = default_allocator, concurrency_cardinality PROD_CARDINALITY = concurrency_multiple, concurrency_cardinality CONSUMER_CARDINALITY = concurrency_multiple, consistency_model CONSISTENCY_MODEL = consistency_sequential&gt;<br />
class density::lf_heter_queue&lt; RUNTIME_TYPE, ALLOCATOR_TYPE, PROD_CARDINALITY, CONSUMER_CARDINALITY, CONSISTENCY_MODEL &gt;::reentrant_consume_operation</h3>

<p>Move-only class that can be bound to a reentrant consume operation, otherwise it's empty.</p>
<p>Reentrant consume functions on <a class="el" href="classdensity_1_1lf__heter__queue.html">lf_heter_queue</a> return a non-empty <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> that can be used to inspect or alter the element while it is not observable in the queue, and commit or cancel the consume.</p>
<p>A <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> is empty when:</p><ul>
<li>it is default constructed</li>
<li>it is used as source for a move construction or move assignment</li>
<li>after a cancel or a commit</li>
</ul>
<p>Calling <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a96491d550e91a5918050bfdafe43a72c">commit</a>, <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a68da6f2190f50df8428c794069767a4e">commit_nodestroy</a>, <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a209a4e37e25451c144910d6f6aa4911e">cancel</a>, <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a58d317d83cb661b5c2a12a1be495cbc8">element_ptr</a>, <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#ad464296faf44c566773b99c68fb2d806">unaligned_element_ptr</a>, <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#ab77422c5e20b146d59a21112b8bf9c5d">element</a> or <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a97f6c2bf3438af74d84b52ded51b122f">complete_type</a> on an empty <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> triggers undefined behavior. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2a74c42ebc0d72ec53c819d1415f5afa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructs an empty <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a></p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume;</div><div class="line">        assert(consume.empty());</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1430f18ae1ce86cc8f009fda9f1852ac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Copy construction is not allowed</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line">        static_assert(</div><div class="line">          !std::is_copy_constructible&lt;typename LfQueue::reentrant_consume_operation&gt;::value, <span class="stringliteral">&quot;&quot;</span>);</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7846d9c2ff73566d66157f8ab2b87537"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>i_source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Move constructor. It is left in a valid but indeterminate state.</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line"></div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line">        <span class="keyword">auto</span> consume = queue.try_start_reentrant_consume();</div><div class="line"></div><div class="line">        <span class="keyword">auto</span> consume_1 = std::move(consume);</div><div class="line">        assert(consume.empty() &amp;&amp; !consume_1.empty());</div><div class="line">        consume_1.commit();</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa4dbafd6c121200dbd7e89cee73f239d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destructor: cancel the operation (if any).</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="comment">// this consumed is started and destroyed before being committed, so it has no observable effects</span></div><div class="line">        queue.try_start_reentrant_consume();</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a1740fe21353ef84ff86517a484cd88e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a>&amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Copy assignment is not allowed</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line">        static_assert(</div><div class="line">          !std::is_copy_assignable&lt;typename LfQueue::reentrant_consume_operation&gt;::value, <span class="stringliteral">&quot;&quot;</span>);</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85c5b3026d809cdf9c7623b7ef7af526"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a>&amp; operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>i_source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Move assignment. It is left in a valid but indeterminate state.</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line"></div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line">        queue.push(43);</div><div class="line">        <span class="keyword">auto</span> consume = queue.try_start_reentrant_consume();</div><div class="line">        consume.cancel();</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume_1;</div><div class="line">        consume   = queue.try_start_reentrant_consume();</div><div class="line">        consume_1 = std::move(consume);</div><div class="line">        assert(consume.empty());</div><div class="line">        assert(!consume_1.empty());</div><div class="line">        consume_1.commit();</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab863df8ed6316860117a6bf26e131bbd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true whether this object does not hold the state of an operation.</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume;</div><div class="line">        assert(consume.empty());</div><div class="line">        consume = queue.try_start_reentrant_consume();</div><div class="line">        assert(!consume.empty());</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae2b1a2d00e00f238645907a7a6a54022"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">operator bool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true whether this object does not hold the state of an operation. Same to !reentrant_consume_operation::empty.</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume;</div><div class="line">        assert(consume.empty() == !consume);</div><div class="line">        consume = queue.try_start_reentrant_consume();</div><div class="line">        assert(consume.empty() == !consume);</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4104ae7c746654227e3ae070f2d7dc60"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdensity_1_1lf__heter__queue.html">lf_heter_queue</a>* queue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a pointer to the target queue if a transaction is bound, otherwise returns nullptr</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume;</div><div class="line">        assert(consume.empty() &amp;&amp; !consume &amp;&amp; consume.queue() == <span class="keyword">nullptr</span>);</div><div class="line">        consume = queue.try_start_reentrant_consume();</div><div class="line">        assert(!consume.empty() &amp;&amp; !!consume &amp;&amp; consume.queue() == &amp;<a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>);</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a96491d550e91a5918050bfdafe43a72c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void commit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destroys the element, making the consume irreversible. This comnsume_operation becomes empty.</p>
<dl class="section pre"><dt>Precondition</dt><dd>The behavior is undefined if either:<ul>
<li>this object is empty</li>
</ul>
</dd></dl>
<p><b>Complexity</b>: Constant. <br />
 <b>Effects on iterators</b>: no iterator is invalidated <br />
 <b>Throws</b>: Nothing. </p>

</div>
</div>
<a class="anchor" id="a68da6f2190f50df8428c794069767a4e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void commit_nodestroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destroys the element, making the consume irreversible. This comnsume_operation becomes empty. The caller should destroy the element before calling this function. This object becomes empty.</p>
<dl class="section pre"><dt>Precondition</dt><dd>The behavior is undefined if either:<ul>
<li>this object is empty</li>
</ul>
</dd></dl>
<p><b>Complexity</b>: Constant. <br />
 <b>Effects on iterators</b>: no iterator is invalidated <br />
 <b>Throws</b>: Nothing.</p>
<p>Note: this function may be used to combine a feature of the runtime type on the element with the destruction of the element. For example a function queue may improve the performances using a feature like invoke_destroy to do both the function call and the destruction of the capture in a single call, making a single pseudo v-call instead of two.</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.template emplace&lt;std::string&gt;(<span class="stringliteral">&quot;abc&quot;</span>);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume = queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#af139b5f22f2d241df4e26e8da9d95f4d">try_start_reentrant_consume</a>();</div><div class="line">        consume.<a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a97f6c2bf3438af74d84b52ded51b122f">complete_type</a>().destroy(consume.element_ptr());</div><div class="line"></div><div class="line">        <span class="comment">// the string has already been destroyed. Calling commit would trigger an undefined behavior</span></div><div class="line">        consume.commit_nodestroy();</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a209a4e37e25451c144910d6f6aa4911e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cancel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Cancel the operation. This <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> becomes empty.</p>
<dl class="section pre"><dt>Precondition</dt><dd>The behavior is undefined if either:<ul>
<li>this object is empty</li>
</ul>
</dd></dl>
<p><b>Complexity</b>: Constant. <br />
 <b>Effects on iterators</b>: no iterator is invalidated <br />
 <b>Throws</b>: Nothing.</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line"></div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume = queue.try_start_reentrant_consume();</div><div class="line">        consume.cancel();</div><div class="line"></div><div class="line">        <span class="comment">// there is still a 42 in the queue</span></div><div class="line">        assert(queue.try_start_reentrant_consume().template element&lt;int&gt;() == 42);</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a97f6c2bf3438af74d84b52ded51b122f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const RUNTIME_TYPE&amp; complete_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the type of the element being consumed.</p>
<dl class="section pre"><dt>Precondition</dt><dd>The behavior is undefined if this <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> is empty.</dd></dl>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume = queue.try_start_reentrant_consume();</div><div class="line">        assert(consume.complete_type().template is&lt;int&gt;());</div><div class="line">        assert(</div><div class="line">          consume.complete_type() == <a class="code" href="classdensity_1_1runtime__type.html#a002bead579375c1cdca5b592a8cda349">runtime_type&lt;&gt;::make</a>&lt;<span class="keywordtype">int</span>&gt;()); <span class="comment">// same to the previous assert</span></div><div class="line">        consume.commit();</div><div class="line"></div><div class="line">        assert(queue.empty());</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad464296faf44c566773b99c68fb2d806"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* unaligned_element_ptr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a pointer that, if properly aligned to the alignment of the element type, points to the element. The returned address is guaranteed to be aligned to min_alignment</p>
<dl class="section pre"><dt>Precondition</dt><dd>The behavior is undefined if this <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> is empty, that is it has been used as source for a move operation. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The returned address is aligned at least on <a class="el" href="classdensity_1_1lf__heter__queue.html#a2cdcdcfbd2342ad05b1c907bfaf76703">lf_heter_queue::min_alignment</a>.</dd></dl>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume = queue.try_start_reentrant_consume();</div><div class="line">        <span class="keywordtype">bool</span> <span class="keyword">const</span>   is_overaligned = <span class="keyword">alignof</span>(int) &gt; LfQueue::min_alignment;</div><div class="line">        <span class="keywordtype">void</span> * <span class="keyword">const</span> unaligned_ptr  = consume.unaligned_element_ptr();</div><div class="line">        <span class="keywordtype">int</span> *        <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a58d317d83cb661b5c2a12a1be495cbc8">element_ptr</a>;</div><div class="line">        <span class="keywordflow">if</span> (is_overaligned)</div><div class="line">        {</div><div class="line">            element_ptr = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span> *<span class="keyword">&gt;</span>(<a class="code" href="namespacedensity.html#afd9406242a9a870ec0aec6ba5e3abf99">address_upper_align</a>(unaligned_ptr, <span class="keyword">alignof</span>(<span class="keywordtype">int</span>)));</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            assert(unaligned_ptr == consume.element_ptr());</div><div class="line">            element_ptr = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span> *<span class="keyword">&gt;</span>(unaligned_ptr);</div><div class="line">        }</div><div class="line">        assert(<a class="code" href="namespacedensity.html#abd5fec5a58abed06cfb780ff147814a7">address_is_aligned</a>(element_ptr, <span class="keyword">alignof</span>(<span class="keywordtype">int</span>)));</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;An int: &quot;</span> &lt;&lt; *element_ptr &lt;&lt; std::endl;</div><div class="line">        consume.commit();</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a58d317d83cb661b5c2a12a1be495cbc8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* element_ptr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a pointer to the element being consumed.</p>
<p>This call is equivalent to: <code>address_upper_align(<a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#ad464296faf44c566773b99c68fb2d806">unaligned_element_ptr()</a>, <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a97f6c2bf3438af74d84b52ded51b122f">complete_type()</a>.alignment());</code></p>
<dl class="section pre"><dt>Precondition</dt><dd>The behavior is undefined if this <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> is empty, that is it has been committed or used as source for a move operation.</dd></dl>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume = queue.try_start_reentrant_consume();</div><div class="line">        ++*<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span> *<span class="keyword">&gt;</span>(consume.element_ptr());</div><div class="line">        assert(consume.template element&lt;int&gt;() == 43);</div><div class="line">        consume.commit();</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab77422c5e20b146d59a21112b8bf9c5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">COMPLETE_ELEMENT_TYPE&amp; element </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a reference to the element being consumed.</p>
<dl class="section pre"><dt>Precondition</dt><dd>The behavior is undefined if this <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> is empty, that is it has been committed or used as source for a move operation. </dd>
<dd>
The behavior is undefined if COMPLETE_ELEMENT_TYPE is not exactly the complete type of the element.</dd></dl>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume = queue.try_start_reentrant_consume();</div><div class="line">        assert(consume.complete_type().template is&lt;int&gt;());</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;An int: &quot;</span> &lt;&lt; consume.template element&lt;int&gt;() &lt;&lt; std::endl;</div><div class="line">        <span class="comment">/* std::cout &lt;&lt; &quot;An float: &quot; &lt;&lt; consume.element&lt;float&gt;() &lt;&lt; std::endl; this would</span></div><div class="line"><span class="comment">                trigger an undefined behavior, because the element is not a float */</span></div><div class="line">        consume.commit();</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="af3bd6a438d194e0df286b60375c458a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void swap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&#160;</td>
          <td class="paramname"><em>i_first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a> &amp;&#160;</td>
          <td class="paramname"><em>i_second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Swaps two instances of <a class="el" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html">reentrant_consume_operation</a>.</p>
<div class="fragment"><div class="line">        <span class="keyword">using</span> LfQueue = <a class="code" href="classdensity_1_1lf__heter__queue.html#a6eb24b71ea03e059d5f010816af8bd58">lf_heter_queue</a>&lt;</div><div class="line">          runtime_type&lt;&gt;,</div><div class="line">          <a class="code" href="namespacedensity.html#adeb11d97131a6de72c7b1d4b6c10f342">default_allocator</a>,</div><div class="line">          PROD_CARDINALITY,</div><div class="line">          CONSUMER_CARDINALITY,</div><div class="line">          CONSISTENCY_MODEL&gt;;</div><div class="line"></div><div class="line">        LfQueue <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#a4104ae7c746654227e3ae070f2d7dc60">queue</a>;</div><div class="line">        queue.<a class="code" href="classdensity_1_1lf__heter__queue.html#ae79645ce0f8c0616bbfda669fa6fbadf">push</a>(42);</div><div class="line"></div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume_1 =</div><div class="line">          queue.try_start_reentrant_consume();</div><div class="line">        <span class="keyword">typename</span> LfQueue::reentrant_consume_operation consume_2;</div><div class="line">        {</div><div class="line">            <span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line">            <a class="code" href="classdensity_1_1lf__heter__queue_1_1reentrant__consume__operation.html#af3bd6a438d194e0df286b60375c458a1">swap</a>(consume_1, consume_2);</div><div class="line">        }</div><div class="line">        assert(consume_2.complete_type().template is&lt;int&gt;());</div><div class="line">        assert(</div><div class="line">          consume_2.complete_type() == <a class="code" href="classdensity_1_1runtime__type.html#a002bead579375c1cdca5b592a8cda349">runtime_type&lt;&gt;::make</a>&lt;<span class="keywordtype">int</span>&gt;()); <span class="comment">// same to the previous assert</span></div><div class="line">        assert(consume_2.template element&lt;int&gt;() == 42);</div><div class="line">        consume_2.commit();</div><div class="line"></div><div class="line">        assert(queue.empty());</div></div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/projects/density/include/density/<a class="el" href="lf__heter__queue_8h_source.html">lf_heter_queue.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
